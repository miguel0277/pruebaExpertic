<!-- "Bienvenido a la plantilla de lecciones de Expertic. Esta plantilla está diseñada para ser utilizada en la plataforma
Expertic y contiene secciones editables para facilitar la personalización del contenido. Asegúrate de seguir las
instrucciones y mantener la estructura adecuada al editar el contenido." -->

<!-- INICIO_HTML_EDITABLE -->
<!--
  "Esta sección es editable. Puedes modificar el contenido según sea necesario. Asegúrate de no eliminar las etiquetas
  HTML que delimitan esta sección editable."
  "Recuerda que cualquier cambio realizado en esta sección se reflejará en la lección de Expertic. Mantén el formato y
  la estructura para garantizar una presentación adecuada."
  "Si necesitas agregar más secciones o elementos, asegúrate de seguir el mismo formato y estilo utilizado en el resto
  de la plantilla."
  "No olvides revisar el contenido final antes de publicarlo para asegurarte de que todo esté correcto y en su lugar."
  "¡Buena suerte con tu lección!"
-->
<div class="editable">


  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">Circuitos Eléctricos I</title>
  <!-- <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> -->

  <style>
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://lh3.google.com/u/2/d/19zveI4Mvf5Kj_orNFPML_m1sjY-zstOB=w1920-h953-iv1') center/cover no-repeat;
      opacity: 0.12;
      z-index: -1;
    }

    details {
      margin-bottom: 0;

    }

    summary {
      background-color: rgb(199, 199, 199);
      color: black;
      border: none;
      padding: 15px;
      text-align: left;
      box-shadow: rgb(116, 116, 116) 0px -2px 5px;
      width: auto;
      cursor: pointer;
      outline: none;
      transition: background-color 0.3s ease;
      margin-bottom: 5px;
      border-radius: 4px;
      font-family: Garamond, 'Times New Roman', Times, serif;
      font-size: 24px;
    }

    .recursos-container {
      justify-content: space-between;
      padding: 15px;
      margin-bottom: 5px;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-radius: 4px;
    }

    .recursos-title {
      text-align: center;
      font-size: x-large;
      margin-top: 0px;
      font-family: Garamond, 'Times New Roman', Times, serif;
      color: #085294;
      font-weight: bold;
    }

    .simuladores-grid {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }

    /* Ajuste específico para la grilla de Videos (desktop: 3-4 por fila, con más margen lateral) */
    #videos-grid {
      max-width: 980px; /* ~4 tarjetas (210px) + gaps + padding */
      margin: 0 auto;   /* centra en el contenedor */
      justify-content: flex-start; /* alinear tarjetas al inicio */
    }

    .simulador {
      flex: 0 0 auto;
      width: 210px;
      text-align: center;
    }

    .simulador img {
      width: 100%;
      border-radius: 8px;
    }

    .simulador-desc {
      margin-top: 10px;
      font-size: 24px;
      text-align: center;
      font-family: Garamond, 'Times New Roman', Times, serif;
      color: #000000;
    }

    .content-container {
      font: garamond, sans-serif;
      justify-content: space-between;
      padding: 15px;
      border: 1px solid rgb(14, 48, 82);
      margin-bottom: 5px;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-radius: 4px;
      background-color: #f9f9f9;
    }

    .content-container h1 {
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
      color: #085294;
      font-family: Garamond, 'Times New Roman', Times, serif;
    }

    .topics {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      width: 100%;
    }

    .topic {
      width: 45%;
      text-align: left;
      font-family: Garamond, 'Times New Roman', Times, serif;
      font-size: 16px;
      color: #085294;
      margin-bottom: 10px;
    }

    .topic ul {
      list-style-type: disc;
      margin-left: 20px;
      color: black;
      font-size: 20px;

    }

    ul {
      font-family: 'garamond', Geneva, Verdana, sans-serif;
      font-size: 24px;
    }

    .button-link {
      display: inline-block;
      padding: 5px 10px;
      font-size: 20px;
      color: #085294;
      text-decoration: none;
      border: 1px solid #085294;
      border-radius: 5px;
      transition: background-color 0.3s;
    }

    .button-link:hover {
      background-color: #e0e0e0;
    }

    .logo-medium {
      width: 250px;
      height: auto;
    }

    .new-image {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 100px;
      height: auto;
      object-fit: contain;
    }

    .leccion-container {
      justify-content: space-between;
      padding: 15px;
      border: 1px solid rgb(14, 48, 82);
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      border-radius: 4px;
    }

    .leccion-content {
      text-align: left;
    }

    .editable-title {
      background-color: white;
      color: rgb(8, 82, 148);
      font-family: Garamond, serif;
      font-weight: bold;
      font-size: 24px;
    }

    .editable-subtitle {
      color: rgb(8, 82, 148);
      font-family: Garamond, serif;
      font-weight: bold;
      font-size: 24px;
    }

    .editable-text {
      color: black;
      font-family: Garamond, serif;
      font-size: 24px;
    }

    a {
      color: rgb(8, 82, 148);
    }

    h1.catalog-title {
      font-size: 24px;
      background-color: white;
      text-align: center;
      font-size: x-large;
      margin-top: 0;
      color: #085294;
      font-weight: bold;
    }

    .video-catalog {
      background-color: rgb(249, 249, 249);
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }

    .video-item {
      flex: 0 0 auto;
      width: 210px;
      text-align: center;
      font-size: 20px;
    }

    .video-item img {
      width: 100%;
      border-radius: 8px;
    }

    .video-title {
      margin-top: 14px;
      font-size: 24px;
      text-align: center;
      font-family: Garamond, 'Times New Roman', Times, serif;
      color: #000;
    }

    .catalogo-titulo {
      text-align: center;
      font-size: x-large;
      color: #085294;
      margin: 20px 0;
      font-weight: bold;
    }

    .libros-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 20px;
      background-color: #f9f9f9;
      font-size: 24px;
    }

    .libro-item {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      width: 150px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      text-align: center;
      background-color: white;
      transition: transform 0.2s;
    }

    .libro-item:hover {
      transform: scale(1.03);
    }

    .libro-item img {
      width: 100%;
      height: auto;
      border-bottom: 1px solid #ccc;
      margin-bottom: 10px;
      border-radius: 4px;
    }

    .libro-item p {
      font-family: Garamond, serif;
      font-size: 24px;
      color: #000;
      margin: 0;
    }

    .button-link {
      color: rgb(8, 82, 148);
      font-family: Garamond, serif;
      font-weight: bold;
      font-size: 20px;
    }

    .frameResumen-container {
      position: relative;
      width: 100%;
      height: 80vh;
      /* Llenar el ancho sin espacios laterales */
      overflow: auto;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
      margin: 20px 0;
    }

    .frameResumen {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      border-radius: 12px;
      transform-origin: top center;
    }

    .zoom-controls {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 6px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 6px;
      padding: 4px 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 2;
    }
    .zoom-btn {
      font-family: Garamond, serif;
      font-size: 14px;
      padding: 4px 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #ffffff;
      color: #085294;
      cursor: pointer;
    }
    .zoom-btn:hover { background: #f0f0f0; }

    @media (max-width: 480px) {
      .frameResumen-container { height: 70vh; }
      .libro-item {
        width: 100%;
      }
    }

    @media (max-width: 768px) {
      .frameResumen-container { height: 70vh; }
      header {
        flex-direction: column;
        text-align: center;
        padding: 10px;
        font-size: medium;
      }


      .logo-left,
      .logo-right {
        display: flex;
        justify-content: center;
        width: 100%;
      }

      .logo-medium {
        width: 200px;
        margin: 5px;
      }

      .new-image {
        width: 80px;
        top: 5px;
        right: 5px;
      }

      .topics {
        flex-direction: column;
        align-items: center;
      }

      .topic {
        width: 100%;
        text-align: center;
      }

      .topic ul {
        text-align: left;
      }

      .Resumen {
        font-size: 12px;
      }

    }
  </style>

  <header style="position: relative; display: flex; justify-content: space-between; align-items: center; padding: 20px; margin-bottom: 10px; box-shadow: rgba(1, 67, 87, 0.66) 0px -2px 5px; z-index: 1; border-radius: 4px; text-align: center;">

    <a href="https://uis.edu.co/fc-e-matematicas-es/" target="_blank" class="editable" onclick="event.preventDefault()">
      <img src="https://lh3.google.com/u/2/d/1gAQiRNX3IWR43D584oV2pjaRl_XlMzOr=w1920-h953-iv2" alt="Logo Asignatura" class="logo-medium editable">
    </a>

    <div style="max-width: 600px; padding: 10px;">
      <h2 class="editable" style="color: #085294; font-family: garamond; font-size: 36px; font-weight: bold;">Circuitos
        Eléctricos I</h2>

      <p class="editable" style="color: black; font-family: garamond; font-size: 24px;">Escuela de Ingenierías
        Eléctrica, Electrónica y de Telecomunicaciones <br>Facultad de Ingenierías Fisicomecánicas <br> Universidad
        Industrial de
        Santander</p>

      <h4 id="leccion-info" class="editable" style="color: #085294; font-family: garamond; font-size: 20px;"></h4>


      <a id="modulo-link" href="#" class="button-link editable">
        Volver al módulo
      </a>
    </div>

    <a href="https://expertic.uis.edu.co/acerca-de-nosotros" target="_blank" class="editable" onclick="event.preventDefault()">
      <img src="https://drive.google.com/thumbnail?id=13b3yJXB-Dake7AQLJEf9uf9CFF_eLAvs" alt="Expertic Logo" class="logo-medium editable">
    </a>

    <img src="https://web.uis.edu.co/wp-content/uploads/elementor/thumbs/Logo-UIS-web-qbqj494k91py9kvbai0ukya46twhbb1tj22br6je4k.webp" alt="Nueva Imagen" class="new-image editable">
  </header>


  <section style="margin: 0;">
    <details>
      <summary class="editable">1. Preparación de la lección</summary>
      <div class="content-container">
        <div style="padding: 20px;">
          <h1 class="editable"><b>Competencias a desarrollar</b></h1>
          <ul>
            <li class="editable">Definir y describir los componentes básicos de los circuitos eléctricos, incluyendo
              resistencias, fuentes de voltaje, y elementos pasivos y activos, así como su función en el comportamiento
              del circuito.</li>
            <li class="editable">Analizar la relación entre tensión y corriente en un circuito eléctrico, comprendiendo
              cómo se distribuyen y se interactúan a través de los componentes, así como su representación gráfica.</li>
            <li class="editable">Aplicar la Ley de Ohm para resolver problemas relacionados con circuitos eléctricos
              simples, calculando la tensión, corriente y resistencia en diversos componentes del circuito.</li>
            <li class="editable">Utilizar las Leyes de Kirchhoff (Ley de Corriente y Ley de Voltaje) para realizar
              análisis de circuitos más complejos, aplicando estas leyes para determinar corrientes y tensiones en nodos
              y mallas.</li>
            <li class="editable">Distinguir entre configuraciones de circuitos en serie y en paralelo, calculando
              resistencias equivalentes y utilizando los principios de divisores de tensión y corriente para analizar el
              comportamiento de circuitos compuestos.</li>
          </ul>
          <!-- 
          <h1 class="editable"><b>Estrategia de Aprendizaje</b></h1>
          <h1 class="editable"><b>Temas y subtemas de la Lección</b></h1>
          <h1 class="editable"><b>Lecciones de Repaso</b></h1>
          <h1 class="editable"><b>Videos de Introducción</b></h1>
          <h1 class="editable"><b>Desafío de Preparación</b></h1>
          <h1 class="editable"><b>Presentación de Recursos adicionales </b></h1> -->
          
<div id="pdf-container" style="justify-content: space-between; padding: 15px; border: 1px solid rgb(14, 48, 82); 
              margin-bottom: 5px; display: flex; align-items: center; height: auto; width: 100%; box-sizing: border-box; 
              border-radius: 4px; overflow: hidden; position: relative;">

        <div style="text-align: left; width: 100%; display: flex; flex-direction: column; justify-content: center;">
          <h2 style="text-align: center;">
            <font color="#085294" face="garamond"><b>Resumen</b></font>
          </h2>

          <div style="display: flex; justify-content: center; margin: 20px 0;">
            <div class="frameResumen-container">
              <iframe id="pdf-frame" class="frameResumen" src="https://docs.google.com/document/d/1GExO1nd_FRd0-Z_UM43J155hI_g-sl-s/preview" allowfullscreen=""></iframe>
              <div class="zoom-controls" aria-label="Controles de zoom del documento">
                <button type="button" class="zoom-btn" data-zoom="out" title="Disminuir zoom">−</button>
                <button type="button" class="zoom-btn" data-zoom="reset" title="Restablecer zoom">100%</button>
                <button type="button" class="zoom-btn" data-zoom="in" title="Aumentar zoom">＋</button>
              </div>
            </div>
          </div>
<!--a href="https://docs.google.com/document/d/1GExO1nd_FRd0-Z_UM43J155hI_g-sl-s/preview" target="_blank" style="display: inline-block; padding: 10px 20px; background-color: #005aa7; color: white; text-decoration: none; border-radius: 5px; font-size: 1rem; font-family: garamond">
      Ver página completa
    </a-->
<div style="text-align: center; margin-bottom: 2em;">
    <a href="https://docs.google.com/document/d/1GExO1nd_FRd0-Z_UM43J155hI_g-sl-s/preview" target="_blank" style="display: inline-block; padding: 10px 20px; background-color: #005aa7; color: white; text-decoration: none; border-radius: 5px; font-size: 1rem;">
      Ver resumen en nueva pestaña
    </a>
  </div>
        </div>
      </div>


<div class="recursos-container">
            <h1 class="recursos-title editable">Catálogo de Videos</h1>
            <div id="videos-grid" class="simuladores-grid">
              <!-- contenido generado dinámicamente desde Google Sheets -->
            </div>

            <h1 class="editable catalog-title">Catálogo de Simuladores</h1>

            <div id="simuladores-grid" class="editable video-catalog">
              <!-- contenido generado dinámicamente desde Google Sheets -->
            </div>

            <h1 class="catalogo-titulo editable">Catálogo de Libros</h1>

            <div id="libros-grid" class="libros-container editable">
              <!-- contenido generado dinámicamente desde Google Sheets -->
            </div>
          </div>


        </div>
      </div>
    </details>

    <details>
      <summary class="editable">2. Profundización de la lección</summary>
      <div class="content-container">
        <h1 id="leccion-title" class="editable"></h1>
        <div class="topics">
          <div class="topic">
            <h2 class="editable">(T1) Conceptos básicos: </h2>
            <ul>
              <li class="editable">Componentes básicos y circuitos
                eléctricos; Tensión y corriente; Ley de Ohm; Nodos y mallas;
                Leyes de Kirchhoff; Elementos en serie y paralelo; Divisor de
                tensión y corriente</li>
            </ul>
            <!--<h2 class="editable">(T0.2) Introducción a la asignatura </h2>
            <ul>
              <li class="editable"></li>
            </ul>-->
          </div>
          <div class="topic">
            <h2 class="editable"></h2>
          </div>
        </div>
      </div>


      <div class="leccion-container">
        <div class="leccion-content">
          <h4 class="editable editable-title">Conceptos básicos</h4>

          <ol id="conceptos-list" class="editable-text">
            <!-- contenido generado dinámicamente desde Google Sheets -->
          </ol>
        </div>
      </div>
    </details>


    <details style="margin-bottom: 0;">
      <summary>3. Reto de la lección</summary>

      
       


<div style="justify-content: space-between; padding: 15px; border: 1px solid rgb(14, 48, 82); 
            margin-bottom: 5px; display: flex; flex-direction: column; align-items: center; 
            border-radius: 4px; width: 100%; box-sizing: border-box;">

        <!-- Columna de Autoevaluación -->
        <div style="width: 100%; max-width: 800px; text-align: center;">
          <h2>
            <font color="#085294" face="garamond"><b>Aula de entrenamiento ExperTIC</b></font>
          </h2>
          <p style="background-color: white; font-size: 23px; text-align: justify;">
            <font face="garamond" color="#000000">
              Realice los talleres propuestos para esta lección en el aula de entrenamiento que encontrará en (<a href="https://expertic.uis.edu.co/lesson/entrenamiento/experticuis" target="_blank">aulas de entrenamiento ExperTIC</a>)</font></p><div style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; text-align: center; gap: 15px;"><div style="flex: 2; min-width: 250px; text-align: center;">
            </div>
          </div>
        </div>
      </div>

    </details>


    <details>
      <summary>4. Cierre de la lección</summary>
      <div style="justify-content: space-between; padding: 15px; border: 1px solid rgb(14, 48, 82); 
            margin-bottom: 5px; display: flex; flex-direction: column; align-items: center; 
            border-radius: 4px; width: 100%; box-sizing: border-box;">

        <!-- Columna de Autoevaluación -->
        <div style="width: 100%; max-width: 800px; text-align: center;">
          <h2>
            <font color="#085294" face="garamond"><b>Autoevaluación</b></font>
          </h2>
          <p style="background-color: white; font-size: 23px; text-align: justify;">
            <font face="garamond" color="#000000">
              ¿Cómo se define un nodo en un circuito eléctrico y qué condiciones debe cumplir para ser considerado como
              tal? Explica cómo se aplica la Ley de Corriente de Kirchhoff en los nodos.<br><br>
              Al analizar un circuito en serie, ¿cómo se determina el voltaje en cada resistencia si se conoce la
              resistencia total y la corriente que fluye a través del circuito? Proporciona un ejemplo que ilustre este
              proceso.<br><br>
              ¿Qué papel desempeña la resistencia equivalente en un circuito en paralelo? Describe cómo se calcula y qué
              efecto tiene sobre la corriente total del circuito.<br><br>
              ¿Cómo se puede utilizar el concepto de divisor de corriente para analizar un circuito con múltiples ramas?
              Explica el procedimiento para calcular la corriente en una rama específica.<br><br>
              En un circuito con múltiples fuentes de voltaje, ¿cómo se determina la dirección de la corriente en cada
              rama? Discute la importancia de las polaridades de las fuentes y cómo influyen en el análisis de
              circuitos.<br><br>
            </font>
          </p>


          <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; text-align: center; gap: 15px;">
            <!-- Imagen -->
            <div style="flex: 1; min-width: 150px; max-width: 200px; text-align: center;">
              <img src="https://lh3.google.com/u/2/d/1n5TudpBjjCY2PJhRSYhyvgYvv-M--FFD=w1920-h953-iv1" style="width: 100%; height: auto; border-radius: 8px;">
            </div>

            <!-- Texto y Botón -->
            <div style="flex: 2; min-width: 250px; text-align: center;">
              <p style="font-size: 20px; text-align: justify;">
                <font face="garamond" color="#000000">
                  Estimados estudiantes,<br><br>
                  Ahora que hemos concluido nuestra lección, es importante reflexionar sobre lo aprendido
                  y consolidar nuestros conocimientos.
                  A continuación, repasaremos los puntos clave de cada tema y evaluaremos nuestra
                  comprensión a través de algunas preguntas reflexivas.
                </font>
              </p>
              <!-- Botón -->
              <div style="text-align: center; margin-top: 10px;">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSc0K331_jmxz_TagVq7UgLzM3B0fAiQPrrMTYtSaWIGD9vANA/viewform?usp=pp_url&amp;entry.47511481=C%C3%A1lculo+III&amp;entry.556883279=L4.2.+Lecci%C3%B3n+11+de+C3&amp;entry.769704434=v1.0-20230920" target="_blank">
                  <button style="background-color: rgb(14, 48, 82); color: white; border: none; padding: 10px 20px; 
                                        cursor: pointer; border-radius: 5px; transition: background-color 0.3s ease; font-size: 20px;">
                    <font face="garamond">Evalúa la lección</font>
                  </button>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </details>



    <!-- <details style="margin-bottom: 0;">
      <summary>Recursos complementarios</summary>


    </details>

    <details style="margin-bottom: 0;">
      <summary>
        Retroalimentación
      </summary>

    </details> -->

  </section>

  <footer style="background-color: #2F4050; color: rgb(255, 255, 255); padding: 20px; position: static; width: 100%; bottom: 0; box-shadow: rgb(234, 201, 182) 0px -2px 5px; width: auto;border-radius: 4px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <p>
        <font face="garamond">© 2025 ExperTIC. All rights reserved.</font>
      </p>
      <img src="https://expertic.uis.edu.co/assets/expertic-logo.png" alt="Footer Logo" style="height: 40px;">
    </div>
<div style="text-align: center; margin-bottom: 2em;">
    <a id="leccion-link" href="#" target="_blank" style="display: inline-block; padding: 10px 20px; background-color: #005aa7; color: white; text-decoration: none; border-radius: 5px; font-size: 1rem;">
      Ver página en nueva pestaña
    </a>
  </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const detailsElements = document.querySelectorAll('details');
      detailsElements.forEach(details => {
        details.addEventListener('toggle', function () {
          if (details.open) {
            detailsElements.forEach(el => {
              if (el !== details) {
                el.removeAttribute('open');
              }
            });
          }
        });
      });
    });
  </script>
  <script>
    (function () {
      const SHEET_BASE = 'https://opensheet.elk.sh/1fySXpMmnvDBngZG1HZwOc9OIdQ38J7HcvV7TtQLJoWw';
      const params = new URLSearchParams(window.location.search);
      const leccionActual = params.get('leccion') || 'L1.1';
      // Permite override por window.SHEETS_ENDPOINTS si se define en otra parte
      const DEFAULT_ENDPOINTS = {
        videos: SHEET_BASE + '/videos',
        simuladores: SHEET_BASE + '/simuladores',
        libros: SHEET_BASE + '/libros',
        // Fuente de Conceptos (bibliografías)
        conceptos: SHEET_BASE + '/bibliografia',
        // Metadatos de lecciones
        lecciones: SHEET_BASE + '/lecciones'
      };
      const ENDPOINTS = Object.assign({}, DEFAULT_ENDPOINTS, (window.SHEETS_ENDPOINTS || {}));

      const pick = (obj, keys) => {
        for (const k of keys) {
          const v = obj[k];
          if (v !== undefined && String(v).trim() !== '') return String(v).trim();
        }
        return '';
      };

      const isHttpUrl = (url) => /^https?:\/\//.test(url || '');

      async function fetchJSON(url) {
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        return await res.json();
      }

      function clearAndAppend(container, children) {
        if (!container) return;
        container.innerHTML = '';
        children.forEach(ch => container.appendChild(ch));
      }

      function filterByLeccion(rows) {
        return rows.filter(row => {
          const codigo = pick(row, ['leccion', 'lección', 'lesson', 'codigo', 'código']);
          return codigo === leccionActual;
        });
      }

      function renderVideos(rows) {
        return rows.map(row => {
          const href = pick(row, ['url', 'enlace', 'link', 'href']);
          const img = pick(row, ['img', 'imagen', 'thumbnail', 'thumb']);
          const title = pick(row, ['titulo', 'título', 'title', 'nombre', 'descripcion', 'descripción']);
          if (!href) return null;

          const wrap = document.createElement('div');
          wrap.className = 'simulador';

          const a = document.createElement('a');
          a.className = 'editable';
          a.href = href; a.target = '_blank';

          const image = document.createElement('img');
          image.className = 'editable';
          if (isHttpUrl(img)) image.src = img;
          a.appendChild(image);

          const desc = document.createElement('div');
          desc.className = 'simulador-desc editable';
          desc.textContent = title || '';

          wrap.appendChild(a);
          wrap.appendChild(desc);
          return wrap;
        }).filter(Boolean);
      }

      function renderSimuladores(rows) {
        return rows.map(row => {
          const href = pick(row, ['url', 'enlace', 'link', 'href']);
          const img = pick(row, ['img', 'imagen', 'logo', 'thumbnail', 'thumb']);
          const title = pick(row, ['titulo', 'título', 'title', 'nombre', 'descripcion', 'descripción']);
          if (!href) return null;

          const item = document.createElement('div');
          item.className = 'editable video-item';

          const a = document.createElement('a');
          a.className = 'editable';
          a.href = href; a.target = '_blank';

          const image = document.createElement('img');
          if (isHttpUrl(img)) image.src = img;
          a.appendChild(image);

          const vt = document.createElement('div');
          vt.className = 'video-title';
          vt.textContent = title || '';

          item.appendChild(a);
          item.appendChild(vt);
          return item;
        }).filter(Boolean);
      }

      function renderLibros(rows) {
        return rows.map(row => {
          const href = pick(row, ['url', 'enlace', 'link', 'href']);
          const img = pick(row, ['img', 'imagen', 'cover', 'portada', 'thumbnail', 'thumb']);
          const title = pick(row, ['titulo', 'título', 'title', 'nombre', 'descripcion', 'descripción']);
          if (!href) return null;

          const item = document.createElement('div');
          item.className = 'libro-item editable';

          const a = document.createElement('a');
          a.className = 'editable';
          a.href = href; a.target = '_blank';

          const image = document.createElement('img');
          if (isHttpUrl(img)) { image.src = img; image.alt = title || 'Carátula'; }
          a.appendChild(image);

          item.appendChild(a);
          const p = document.createElement('p');
          p.textContent = title || '';
          item.appendChild(p);
          return item;
        }).filter(Boolean);
      }

      function parseBibliografias(str) {
        if (!str) return [];
        return String(str)
          .split(',')
          .map(s => s.trim())
          .filter(Boolean)
          .map((token, idx) => {
            // Formato opcional: Label|URL  ó  solo URL  ó  solo texto
            const parts = token.split('|').map(p => p.trim());
            if (parts.length === 2 && isHttpUrl(parts[1])) {
              return { label: parts[0] || ('Enlace ' + (idx + 1)), url: parts[1] };
            }
            if (isHttpUrl(parts[0])) {
              try {
                const u = new URL(parts[0]);
                const host = u.hostname.replace(/^www\./, '');
                return { label: parts[1] || host, url: parts[0] };
              } catch { /* ignore */ }
              return { label: parts[0], url: parts[0] };
            }
            return { label: parts.join(' '), url: '' };
          });
      }

      function renderConceptos(rows) {
        // Ordenar por 'numeral' si está presente
        const sorted = [...rows].sort((a, b) => {
          const na = parseFloat(pick(a, ['numeral', 'n', '#'])) || 0;
          const nb = parseFloat(pick(b, ['numeral', 'n', '#'])) || 0;
          return na - nb;
        });

        return sorted.map(row => {
          const titulo = pick(row, ['titulo', 'título', 'title', 'nombre']);
          const bibliosRaw = pick(row, ['bibliografias', 'bibliografías', 'refs', 'referencias']);
          if (!titulo) return null;

          const li = document.createElement('li');
          const strongTitle = document.createTextNode(titulo.replace(/\.$/, ''));
          li.appendChild(strongTitle);

          const bibs = parseBibliografias(bibliosRaw);
          if (bibs.length) {
            li.appendChild(document.createTextNode('. (Bibliografía: '));
            bibs.forEach((b, i) => {
              if (b.url) {
                const a = document.createElement('a');
                a.href = b.url; a.target = '_blank'; a.textContent = b.label || 'Enlace';
                li.appendChild(a);
              } else {
                li.appendChild(document.createTextNode(b.label));
              }
              if (i < bibs.length - 1) li.appendChild(document.createTextNode(', '));
            });
            li.appendChild(document.createTextNode(').'));
          } else {
            li.appendChild(document.createTextNode('.'));
          }
          return li;
        }).filter(Boolean);
      }

      document.addEventListener('DOMContentLoaded', async () => {
        const videosGrid = document.getElementById('videos-grid');
        const simuladoresGrid = document.getElementById('simuladores-grid');
        const librosGrid = document.getElementById('libros-grid');
        const conceptosList = document.getElementById('conceptos-list');

        const tasks = [
          fetchJSON(ENDPOINTS.videos).then(data => ({ key: 'videos', data })).catch(() => ({ key: 'videos', data: [] })),
          fetchJSON(ENDPOINTS.simuladores).then(data => ({ key: 'simuladores', data })).catch(() => ({ key: 'simuladores', data: [] })),
          fetchJSON(ENDPOINTS.libros).then(data => ({ key: 'libros', data })).catch(() => ({ key: 'libros', data: [] })),
          fetchJSON(ENDPOINTS.conceptos).then(data => ({ key: 'conceptos', data })).catch(() => ({ key: 'conceptos', data: [] })),
          fetchJSON(ENDPOINTS.lecciones).then(data => ({ key: 'lecciones', data })).catch(() => ({ key: 'lecciones', data: [] }))
        ];

        const results = await Promise.all(tasks);
        for (const r of results) {
          if (r.key === 'videos' && videosGrid) {
            clearAndAppend(videosGrid, renderVideos(filterByLeccion(r.data)));
          }
          if (r.key === 'simuladores' && simuladoresGrid) {
            clearAndAppend(simuladoresGrid, renderSimuladores(filterByLeccion(r.data)));
          }
          if (r.key === 'libros' && librosGrid) {
            clearAndAppend(librosGrid, renderLibros(filterByLeccion(r.data)));
          }
          if (r.key === 'conceptos' && conceptosList) {
            clearAndAppend(conceptosList, renderConceptos(filterByLeccion(r.data)));
          }
          if (r.key === 'lecciones') {
            const meta = r.data.find(row => {
              const code = pick(row, ['leccion', 'lección', 'lesson', 'codigo', 'código']);
              return code === leccionActual;
            });
            if (meta) {
              const titulo = pick(meta, ['titulo', 'título', 'title', 'nombre']);
              const h1 = document.getElementById('leccion-title');
              if (h1) h1.textContent = `${leccionActual} ${titulo || ''}`.trim();
              const pt = document.getElementById('page-title');
              if (pt) pt.textContent = `Circuitos Eléctricos I. ${leccionActual}`;
              const link = document.getElementById('leccion-link');
              const url = pick(meta, ['url', 'enlace', 'link']);
              if (link && url) link.href = url;
              const info = document.getElementById('leccion-info');
              if (info) {
                const modulo = pick(meta, ['modulo', 'módulo', 'module']);
                const tituloModulo = pick(meta, ['titulo_modulo', 'título_módulo', 'nombre_modulo', 'modulo_titulo']);
                const textoModulo = modulo ? `Módulo ${modulo}${tituloModulo ? '. ' + tituloModulo : ''}` : '';
                info.innerHTML = `${textoModulo ? textoModulo + '<br>' : ''} Lección ${leccionActual} ${titulo || ''}`.trim();
              }
              const moduleLink = document.getElementById('modulo-link');
              const urlModulo = pick(meta, ['url_modulo', 'enlace_modulo', 'link_modulo']);
              if (moduleLink && urlModulo) moduleLink.href = urlModulo;
            }
          }
        }
      });
    })();
  </script>
  <script>
    function ajustarPDF() {
      var iframe = document.getElementById('pdf-frame');
      if (!iframe) return;
      // Mantener siempre a tamaño del contenedor
      iframe.style.width = '100%';
      iframe.style.height = '100%';
    }

    // Ajusta cuando la página carga y cuando cambia el tamaño de la pantalla
    window.onload = ajustarPDF;
    window.onresize = ajustarPDF;
  </script>
  <script>
    (function(){
      var iframe = document.getElementById('pdf-frame');
      if (!iframe) return;
      var scale = 1;
      function applyScale(){
        iframe.style.transform = 'scale(' + scale + ')';
      }
      function setScale(next){
        scale = Math.max(0.5, Math.min(2.0, next));
        applyScale();
      }
      document.addEventListener('click', function(e){
        var btn = e.target.closest('.zoom-btn');
        if (!btn) return;
        var action = btn.getAttribute('data-zoom');
        if (action === 'in') setScale(scale + 0.1);
        if (action === 'out') setScale(scale - 0.1);
        if (action === 'reset') setScale(1);
      });
      applyScale();
    })();
  </script>
</div>



<!-- FIN_HTML_EDITABLE -->
